# 🔄 **FitLoop** - メタプロンプト駆動型フィットネスアプリ

🌐 **本番環境**: https://fitloop-app.pages.dev

## 1. アプリ概要

### コンセプト
**FitLoop**（フィットループ）- 「プロンプトがプロンプトを生み出す」革新的なメタプロンプトシステムを採用したAI筋トレサポートアプリ。外部AI（Claude、ChatGPT、Gemini）と連携し、パーソナライズされたトレーニングメニューを自動進化させる次世代フィットネスアプリケーション。

### 主要特徴
- **メタプロンプトシステム**: プロンプトがプロンプトを生成する革新的な仕組み
- **自動進化**: トレーニング記録に基づいて継続的に最適化
- **外部AI連携**: Claude、ChatGPT、Geminiなどの外部AIサービスとコピー&ペーストで連携
- **完全パーソナライズ**: 個人の目標・環境・経験に合わせたカスタマイズ
- **4タブ構成**: プロンプト、プロフィール、ライブラリ、使い方ガイド
- **ダークモード**: 目に優しい夜間モード完全対応
- **レスポンシブ**: モバイルファーストのデザイン

### 基本フロー
1. **プロフィール設定**: 基本情報、目標、環境を設定
2. **メタプロンプト生成**: アプリが最適なトレーニングプロンプトを自動生成
3. **外部AI実行**: 生成されたプロンプトを外部AIサービス（Claude、ChatGPT、Gemini）にコピー&ペースト
4. **結果フィードバック**: AIの応答を貼り付けて次回のプロンプトを自動改善

## 2. 主要機能

### 2.1 コア機能

#### メタプロンプトシステム
- **自動生成**: ユーザープロフィールから最適なトレーニングプロンプトを自動生成
- **自己進化**: トレーニング記録を分析して次回プロンプトを自動更新
- **筋肉バランス分析**: 使用重量から筋肉発達状況を推測
- **プログラム最適化**: 理想的な筋肉バランスに向けた調整

#### 外部AI連携
- **コピー&ペースト**: 生成されたプロンプトを外部AIサービスにコピー
- **応答取り込み**: AIの応答を貼り付けて分析・学習
- **対応サービス**: Claude、ChatGPT、Gemini等の主要AIサービス

### 2.2 ユーザーインターフェース

#### プロンプトタブ（メイン画面）
- **メタプロンプト表示**: 現在のトレーニングプロンプトを表示
- **ワンタップコピー**: クリップボードへの簡単コピー
- **AI応答入力**: 外部AIからの応答を貼り付け
- **状態表示**: プロンプトバージョン、次回セッション番号

#### プロフィールタブ
- **基本情報設定**: 身長、体重、年齢、性別
- **目標設定**: 筋力向上、減量、持久力、筋肥大
- **環境設定**: ジム、自宅、屋外の選択
- **経験レベル**: 初心者、中級者、上級者

#### ライブラリタブ
- **プロンプト履歴**: 過去の生成プロンプト一覧
- **お気に入り**: よく使うプロンプトの保存
- **検索・フィルタ**: カテゴリや日付での絞り込み

#### 使い方ガイドタブ
- **基本的な使い方**: アプリの使用方法説明
- **外部AI連携方法**: 各AIサービスとの連携手順
- **FAQ**: よくある質問と回答

## 3. 技術仕様

### 3.1 アーキテクチャ

#### フロントエンド技術スタック
- **フレームワーク**: React 19.1.0
- **スタイリング**: Tailwind CSS 4.1.8
- **状態管理**: Zustand 5.0.5
- **データベース**: Dexie (IndexedDB wrapper) 4.0.11
- **ルーティング**: React Router DOM 7.6.1
- **アイコン**: Lucide React 0.511.0
- **ビルドツール**: Vite 6.3.5
- **デプロイ**: Cloudflare Pages

#### 主要機能
- **プログレッシブウェブアプリ（PWA）**: オフライン対応
- **レスポンシブデザイン**: モバイルファースト
- **ダークモード**: システム設定連動
- **クリップボード連携**: Clipboard API使用

### 3.2 データモデル

#### ユーザープロフィール
```typescript
interface UserProfile {
  basic: {
    name: string
    age: number
    gender: 'male' | 'female' | 'other'
    height: number  // cm
    weight: number  // kg
    experienceLevel: 'beginner' | 'intermediate' | 'advanced'
  }
  goals: {
    primaryGoal: 'strength' | 'weight_loss' | 'endurance' | 'muscle_gain'
    deadline: '1month' | '3months' | '6months' | '1year'
  }
  environment: {
    location: 'gym' | 'home' | 'outdoor'
    frequency: number // 週あたりのトレーニング回数（1-7）
  }
}
```

#### プロンプトデータ
```typescript
interface SavedPrompt {
  id: string
  title: string
  content: string
  description?: string
  category?: string
  tags?: string[]
  isFavorite?: boolean
  createdAt: Date
  updatedAt?: Date
}
```

## 4. 使用方法

### 4.1 初回セットアップ
1. **プロフィール設定**
   - 基本情報（身長、体重、年齢、性別）を入力
   - トレーニング目標を選択（筋力向上、減量、持久力、筋肥大）
   - 環境を選択（ジム、自宅、屋外）
   - 経験レベルを選択（初心者、中級者、上級者）

2. **メタプロンプト生成**
   - プロフィール情報を基にアプリが自動的にトレーニングプロンプトを生成
   - 個人の目標・環境に最適化されたメニューが作成される

### 4.2 日常の使用フロー

1. **プロンプトタブを開く**
   - 生成されたメタプロンプトが表示される
   - 現在のプロンプトバージョンと次回セッション番号を確認

2. **外部AIサービスと連携**
   - 「プロンプトをコピー」ボタンをタップ
   - Claude、ChatGPT、Geminiなど好きなAIサービスを開く
   - コピーしたプロンプトを貼り付けて実行

3. **トレーニング実施**
   - AIからの応答に従ってトレーニングを実施
   - 実施した内容（重量、回数、セット数）を記録

4. **フィードバック入力**
   - トレーニング結果をAIに報告
   - AIが次回用の改善されたプロンプトを生成
   - 新しいプロンプトをコピー

5. **アプリに戻って更新**
   - AI応答エリアに新しいプロンプトを貼り付け
   - アプリが自動的に次回のプロンプトとして保存

### 4.3 プロンプト管理
- **ライブラリタブ**: 過去のプロンプト履歴を確認
- **お気に入り**: よく使うプロンプトを保存
- **検索機能**: 日付やカテゴリで検索可能

## 5. 開発状況

### 5.1 実装済み機能
- ✅ 4タブ構成のUI（プロンプト、プロフィール、ライブラリ、使い方ガイド）
- ✅ メタプロンプト表示・コピー機能
- ✅ AI応答貼り付けエリア（編集可能なテキストエリア）
- ✅ ダークモード対応（システム設定連動）
- ✅ レスポンシブデザイン（モバイルファースト）
- ✅ IndexedDBによるローカルデータ保存
- ✅ PWA対応（オフライン動作）
- ✅ プロフィール情報管理（基本情報、目標、環境設定）
- ✅ セキュリティヘッダー設定
- ✅ クリップボードAPI連携（コピー&ペースト機能）

### 5.2 開発中の機能
- 🔄 プロフィール情報からのプロンプト自動生成
- 🔄 プロンプト履歴管理（ライブラリタブ）
- 🔄 お気に入り機能
- 🔄 検索・フィルタリング機能
- 🔄 トレーニング記録の自動解析

### 5.3 今後の予定
- 📅 トレーニング記録の可視化（グラフ表示）
- 📅 筋肉バランス分析機能
- 📅 栄養管理機能
- 📅 外部AIサービスとの直接連携（API統合）
- 📅 クラウド同期機能
- 📅 多言語対応

## 6. 技術的特徴

### 6.1 セキュリティ
- **Content Security Policy (CSP)**: XSS攻撃を防ぐための厳格なポリシー設定
- **セキュリティヘッダー**: X-Frame-Options、X-Content-Type-Options等の設定
- **HTTPS強制**: 本番環境での暗号化通信

### 6.2 パフォーマンス
- **遅延読み込み**: React.lazyによるコード分割
- **最適化されたビルド**: Viteによる高速ビルド
- **キャッシュ戦略**: PWAによる効率的なキャッシング

### 6.3 アクセシビリティ
- **セマンティックHTML**: 適切なHTML要素の使用
- **キーボードナビゲーション**: タブ操作に対応
- **高コントラスト**: ダークモード完全対応

## 7. インストールと実行

### 7.1 開発環境での実行

```bash
# リポジトリのクローン
git clone https://github.com/[your-username]/fitloop.git
cd fitloop/fitloop-app

# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

### 7.2 ビルドとデプロイ

```bash
# プロダクションビルド
npm run build

# Cloudflare Pagesへのデプロイ
npm run deploy
```

### 7.3 テスト

```bash
# ユニットテスト
npm run test

# E2Eテスト（Playwright）
npm run test:e2e

# E2Eテスト（UIモード）
npm run test:e2e:ui

# カバレッジレポート
npm run test:coverage
```

### 7.4 環境変数

開発環境と本番環境で以下の環境変数を設定：

```bash
# .env.development
VITE_APP_ENV=development

# .env.production
VITE_APP_ENV=production
```

```bash
# ユニットテスト
npm run test

# E2Eテスト
npm run test:e2e

# カバレッジレポート
npm run test:coverage
```

## 8. 貢献方法

### 8.1 Issue報告
- バグ報告
- 機能リクエスト
- 改善提案

### 8.2 プルリクエスト
1. リポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 9. ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細は[LICENSE](LICENSE)ファイルを参照してください。

## 10. お問い合わせ

- **Issue**: [GitHub Issues](https://github.com/[your-username]/fitloop/issues)
- **Email**: [your-email@example.com]
- **Twitter**: [@your-handle]

---

**FitLoop** - AIとの対話で進化し続ける、あなただけのフィットネスコーチ 💪

## 11. 更新履歴

### v1.0.0 (2025-06-20)
- 初回リリース
- 基本的な4タブ構成の実装
- メタプロンプトシステムの基礎実装
- PWA対応
- セキュリティ強化

